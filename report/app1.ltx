\section{Численное интегрирование по методу Магнуса}
\label{app:code-bash}

Для численного интегрирования по методу Магнуса использовался
код\footnote{Использовалась версия с номером коммита
	\texttt{d3f0634b63a848aa36b4854464ae083c0f97dfcf}.} из проекта magexp
(\url{https://git.sr.ht/~vp1981/magexp}).

Для автоматизации получения необходимых данных от программы численного решения
уравнения осцилляции мы использовали сценарий, приведённых ниже.

Необходимые пояснения к нему:
\begin{itemize}[noitemsep]
\item количество «шагов» для фактора \(f\) и перебора энергии передавали при
  запуске сценария как его второй и третий аргументы;
\item угол для вариации задавался в виде символьной строки первым аргументом;
\item из-за специфики работы программы численного расчёта мы самостоятельно
  расчитываем «шаги» и передаём новые значения при каждом вызове программы
  счёта;
\item для проведения численных вычислений входных параметров использовался
  встроенный в программу счёта язык программирования lua;
\item \texttt{TODO}: формат записываемых данных.
\end{itemize}

\inputminted[linenos,breaklines,fontsize=\footnotesize]{bash}{../run-ang_sun-in.sh}


Управляющие файлы для программы счёта:
\begin{itemize}
\item модель
  \inputminted[linenos,breaklines,fontsize=\footnotesize]{lua}{../magexp/bin/sun.lua}
\item вычисление вероятности выживания
  \inputminted[linenos,breaklines,fontsize=\footnotesize]{lua}{../magexp/bin/survprob.lua}
  Эту настройку нужно подключать последней, т.к. расчёт вероятности зависит от
  углов смешивания, которые задаются ранее в командной строке.
\end{itemize}

\textattachfile{../run-ang_sun-in.sh}{Код сценария в виде файла (только для
  электронной версии документа).}

\textattachfile{../magexp/bin/sun.lua}{Код управляющий моделью в виде файла
(только для электронной версии документа).}

\textattachfile{../magexp/bin/survprob.lua}{Код управляющий вероятностью в виде
файла (только для электронной версии документа).}

%%% Local Variables:
%%% mode: LaTeX
%%% TeX-master: "main.ltx"
%%% End:
