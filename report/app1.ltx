\section{Численное интегрирование по методу Магнуса}
\label{app:code-bash}

Для численного интегрирования по методу Магнуса использовался
код\footnote{Использовалась версия с номером коммита
\texttt{d3f0634b63a848aa36b4854464ae083c0f97dfcf}.} из проекта magexp
(\url{https://git.sr.ht/~vp1981/magexp}).

Для автоматизации получения необходимых данных от программы численного решения
уравнения осцилляции мы использовали сценарий, приведённых ниже.

Необходимые пояснения к нему:
\begin{itemize}[noitemsep]
\item первый аргумент выбирает для вариации один из двух углов смешивания;
\item второй — количество шагов для перебора энергии (равномерный выбор в
  логарифмическом масштабе); из-за особенности выбора энергии мы используем
  встроенный интерпретатор lua для вычисления текущего значения энергии;
\item третий аргумент задаёт количество «шагов» для фактора \(f\) (см. формулу
  \eqref{eq:9});
\item в выходной файл записывались только: конечная расчётная точка уравнения,
  энергия, вероятность выживания, текущее значение угла смешивания и численный
  фактор \(f\).
\end{itemize}

\inputminted[linenos,breaklines,fontsize=\footnotesize]{bash}{../run-ang_sun-in.sh}

Управляющие файлы для программы счёта:
\begin{itemize}
\item модель
  \inputminted[linenos,breaklines,fontsize=\footnotesize]{lua}{../magexp/bin/sun.lua}
\item вычисление вероятности выживания
  \inputminted[linenos,breaklines,fontsize=\footnotesize]{lua}{../magexp/bin/survprob.lua}
  Эту настройку нужно подключать последней, т.к. расчёт вероятности зависит от
  углов смешивания, которые задаются ранее в командной строке.
\end{itemize}

\textattachfile{../run-ang_sun-in.sh}{Код сценария в виде файла (только для
  электронной версии документа).}

\textattachfile{../magexp/bin/sun.lua}{Код управляющий моделью в виде файла
(только для электронной версии документа).}

\textattachfile{../magexp/bin/survprob.lua}{Код управляющий вероятностью в виде
файла (только для электронной версии документа).}

%%% Local Variables:
%%% mode: LaTeX
%%% TeX-master: "main.ltx"
%%% End:
